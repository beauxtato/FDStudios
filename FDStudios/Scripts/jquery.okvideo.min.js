function vimeoPlayerReady(){options=$(window).data("okoptions");var a=$("#okplayer")[0];player=$f(a),window.setTimeout($("#okplayer").css("visibility","visible"),2e3),player.addEvent("ready",function(){player.api("play"),OKEvents.utils.isMobile()?OKEvents.v.onPlay():(player.addEvent("play",OKEvents.v.onPlay()),player.addEvent("pause",OKEvents.v.onPause()),player.addEvent("finish",OKEvents.v.onFinish()))})}function onYouTubePlayerAPIReady(){options=$(window).data("okoptions"),player=new YT.Player("okplayer",{videoId:options.video?options.video.id:null,playerVars:{autohide:1,autoplay:1,disablekb:options.keyControls,cc_load_policy:options.captions,controls:0,enablejsapi:1,fs:0,iv_load_policy:1,loop:options.loop,showinfo:0,rel:0,wmode:"opaque",hd:options.hd},events:{onReady:OKEvents.yt.ready,onStateChange:OKEvents.yt.onStateChange,onError:OKEvents.yt.error}})}var player,OKEvents,options;(function(a){"use strict";a.okvideo=function(b){"object"!=typeof b&&(b={video:b});var c=this;c.init=function(){c.options=a.extend({},a.okvideo.options,b),null===c.options.video&&(c.options.video=c.options.source),OKEvents.utils.isMobile()?a("body").append('<div id="okplayer" style="position:fixed;left:0;top:0;overflow:hidden;z-index:-999;height:100%;width:100%;"></div>'):c.options.adproof?a("body").append('<div style="position:fixed;left:0;top:0;overflow:hidden;z-index:-998;height:100%;width:100%;" id="okplayer-mask"></div><div id="okplayer" style="position:fixed;left:0;top:0;overflow:hidden;z-index:-999;height:110%;width:110%;"></div>'):a("body").append('<div style="position:fixed;left:0;top:0;overflow:hidden;z-index:-998;height:100%;width:100%;" id="okplayer-mask"></div><div id="okplayer" style="position:fixed;left:0;top:0;overflow:hidden;z-index:-999;height:100%;width:100%;"></div>'),c.setOptions(),null===c.options.playlist.list?"youtube"===c.options.video.provider?c.loadYouTubeAPI():"vimeo"===c.options.video.provider&&(c.options.volume/=100,c.loadVimeoAPI()):c.loadYouTubeAPI()},c.setOptions=function(){for(var b in this.options)this.options[b]===!0&&(this.options[b]=1);null===c.options.playlist.list&&(c.options.video=c.determineProvider()),a(window).data("okoptions",c.options)},c.loadYouTubeAPI=function(){c.insertJS("http://www.youtube.com/player_api")},c.loadYouTubePlaylist=function(){player.loadPlaylist(c.options.playlist.list,c.options.playlist.index,c.options.playlist.startSeconds,c.options.playlist.suggestedQuality)},c.loadVimeoAPI=function(){a("#okplayer").replaceWith(function(){return'<iframe src="http://player.vimeo.com/video/'+c.options.video.id+"?api=1&js_api=1&title=0&byline=0&portrait=0&playbar=0&loop="+c.options.loop+'&player_id=okplayer" frameborder="0" style="'+a(this).attr("style")+'visibility:hidden;" id="'+a(this).attr("id")+'"></iframe>'}),c.insertJS("http://a.vimeocdn.com/js/froogaloop2.min.js",function(){vimeoPlayerReady()})},c.insertJS=function(a,b){var c=document.createElement("script");b&&(c.readyState?c.onreadystatechange=function(){("loaded"===c.readyState||"complete"===c.readyState)&&(c.onreadystatechange=null,b())}:c.onload=function(){b()}),c.src=a;var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d)},c.determineProvider=function(){var a=document.createElement("a");if(a.href=c.options.video,/youtube.com/.test(c.options.video))return{provider:"youtube",id:""+a.href.slice(a.href.indexOf("v=")+2)};if(/vimeo.com/.test(c.options.video))return{provider:"vimeo",id:""+a.href.split("/")[3]};if(/[A-Za-z0-9_]+/.test(c.options.video)){var b=new String(c.options.video.match(/[A-Za-z0-9_]+/));if(11==b.length)return{provider:"youtube",id:""+b};for(var d=0;c.options.video.length>d;d++)if("number"!=typeof parseInt(c.options.video[d]))throw"not vimeo but thought it was for a sec";return{provider:"vimeo",id:c.options.video}}throw"OKVideo: Invalid video source"},c.init()},a.okvideo.options={source:null,video:null,playlist:{list:null,index:0,startSeconds:0,suggestedQuality:"default"},disableKeyControl:1,captions:0,loop:1,hd:1,volume:0,adproof:!0,unstarted:null,onFinished:null,onPlay:null,onPause:null,buffering:null,cued:null},a.fn.okvideo=function(b){return this.each(function(){new a.okvideo(b)})}})(jQuery),OKEvents={yt:{ready:function(a){a.target.setVolume(options.volume),options.playlist.list?player.loadPlaylist(options.playlist.list,options.playlist.index,options.playlist.startSeconds,options.playlist.suggestedQuality):a.target.playVideo()},onStateChange:function(a){switch(a.data){case-1:OKEvents.utils.isFunction(options.unstarted)&&options.unstarted();break;case 0:OKEvents.utils.isFunction(options.onFinished)&&options.onFinished(),options.loop&&a.target.playVideo();break;case 1:OKEvents.utils.isFunction(options.onPlay)&&options.onPlay();break;case 2:OKEvents.utils.isFunction(options.onPause)&&options.onPause();break;case 3:OKEvents.utils.isFunction(options.buffering)&&options.buffering();break;case 5:OKEvents.utils.isFunction(options.cued)&&options.cued();break;default:throw"OKVideo: received invalid data from YT player."}},error:function(a){throw a}},v:{onPlay:function(){OKEvents.utils.isMobile()||player.api("api_setVolume",options.volume),OKEvents.utils.isFunction(options.onPlay)&&options.onPlay()},onPause:function(){OKEvents.utils.isFunction(options.onPlay)&&options.onPause()},onFinish:function(){OKEvents.utils.isFunction(options.onPlay)&&options.onFinish()}},utils:{isFunction:function(a){return"function"==typeof a?!0:(1===a&&(a=!0),!1)},isMobile:function(){return navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry)/)?!0:!1}}};